// Generated by GraphQL Generator
// DO NOT EDIT - This file is automatically generated

import Foundation
import GraphQL

/// Build a GraphQL schema with the provided resolvers
public func buildGraphQLSchema<T: GraphQLResolvers>(resolvers: T) throws -> GraphQLSchema {

    let roleType = try GraphQLEnumType(
        name: "Role",
        description: """
        User role enumeration
        """,
        values: [
            "ADMIN": GraphQLEnumValue(
                value: .string("ADMIN")
            ),
            "USER": GraphQLEnumValue(
                value: .string("USER")
            ),
            "GUEST": GraphQLEnumValue(
                value: .string("GUEST")
            ),
        ]
    )
    let hasEmailInterface = try GraphQLInterfaceType(
        name: "HasEmail"
    )
    let userInfoInput = try GraphQLInputObjectType(name: "UserInfo")
    let userType = try GraphQLObjectType(
        name: "User",
        description: """
        A simple user type
        """,
    )
    let contactType = try GraphQLObjectType(
        name: "Contact",
    )
    let postType = try GraphQLObjectType(
        name: "Post",
        description: """
        A blog post
        """,
    )
    let userOrPostUnion = try GraphQLUnionType(
        name: "UserOrPost",
        description: "Get a user or post by ID",
        types: {
            [userType, postType]
        }
    )
    hasEmailInterface.fields = {
        [
            "email": GraphQLField(
                type: GraphQLNonNull(GraphQLString),
                description: """
                The user's email address
                """,
            ),
        ]
    }
    userInfoInput.fields = {
        [
            "id": InputObjectField(
                type: GraphQLNonNull(GraphQLID),
            ),
            "name": InputObjectField(
                type: GraphQLNonNull(GraphQLString),
            ),
            "email": InputObjectField(
                type: GraphQLNonNull(GraphQLString),
            ),
            "age": InputObjectField(
                type: GraphQLInt,
            ),
            "role": InputObjectField(
                type: roleType,
            ),
        ]
    }
    userType.fields = {
        [
            "id": GraphQLField(
                type: GraphQLNonNull(GraphQLID),
                description: """
                The unique identifier for the user
                """,
            ),
            "name": GraphQLField(
                type: GraphQLNonNull(GraphQLString),
                description: """
                The user's display name
                """,
            ),
            "email": GraphQLField(
                type: GraphQLNonNull(GraphQLString),
                description: """
                The user's email address
                """,
            ),
            "age": GraphQLField(
                type: GraphQLInt,
                description: """
                The user's age
                """,
            ),
            "role": GraphQLField(
                type: roleType,
                description: """
                The user's age
                """,
            ),
        ]
    }
    userType.interfaces = {
        [hasEmailInterface]
    }
    contactType.fields = {
        [
            "email": GraphQLField(
                type: GraphQLNonNull(GraphQLString),
                description: """
                The user's email address
                """,
            ),
        ]
    }
    contactType.interfaces = {
        [hasEmailInterface]
    }
    postType.fields = {
        [
            "id": GraphQLField(
                type: GraphQLNonNull(GraphQLID),
                description: """
                The unique identifier for the post
                """,
            ),
            "title": GraphQLField(
                type: GraphQLNonNull(GraphQLString),
                description: """
                The post title
                """,
            ),
            "content": GraphQLField(
                type: GraphQLNonNull(GraphQLString),
                description: """
                The post content
                """,
            ),
            "author": GraphQLField(
                type: GraphQLNonNull(userType),
                description: """
                The author of the post
                """,
                resolve: { source, args, context, info in
                    let parent = try resolvers.cast(source, to: T.TypeMap.Post.self)
                    let context = try resolvers.cast(context, to: T.TypeMap.Context.self)
                    return try await parent.author(context: context, info: info)
                }
            ),
        ]
    }

    let queryType = try GraphQLObjectType(
        name: "Query",
        description: """
        Root query type
        """,
        fields: [
            "user": GraphQLField(
                type: userType,
                description: """
                Get a user by ID
                """,
                args: [
                    "id": GraphQLArgument(
                        type: GraphQLNonNull(GraphQLID)
                    ),
                ],
                resolve: { source, args, context, info in
                    let id = try MapDecoder().decode(String.self, from: args["id"])
                    let context = try resolvers.cast(context, to: T.TypeMap.Context.self)
                    return try await resolvers.user(id: id, context: context, info: info)
                }
            ),
            "users": GraphQLField(
                type: GraphQLNonNull(GraphQLList(GraphQLNonNull(userType))),
                description: """
                Get all users
                """,
                resolve: { source, args, context, info in
                    let context = try resolvers.cast(context, to: T.TypeMap.Context.self)
                    return try await resolvers.users(context: context, info: info)
                }
            ),
            "post": GraphQLField(
                type: postType,
                description: """
                Get a post by ID
                """,
                args: [
                    "id": GraphQLArgument(
                        type: GraphQLNonNull(GraphQLID)
                    ),
                ],
                resolve: { source, args, context, info in
                    let id = try MapDecoder().decode(String.self, from: args["id"])
                    let context = try resolvers.cast(context, to: T.TypeMap.Context.self)
                    return try await resolvers.post(id: id, context: context, info: info)
                }
            ),
            "posts": GraphQLField(
                type: GraphQLNonNull(GraphQLList(GraphQLNonNull(postType))),
                description: """
                Get recent posts
                """,
                args: [
                    "limit": GraphQLArgument(
                        type: GraphQLInt
                    ),
                ],
                resolve: { source, args, context, info in
                    let limit = args["limit"] != .undefined ? try MapDecoder().decode(Int?.self, from: args["limit"]): nil
                    let context = try resolvers.cast(context, to: T.TypeMap.Context.self)
                    return try await resolvers.posts(limit: limit, context: context, info: info)
                }
            ),
        ]
    )
    let mutationType = try GraphQLObjectType(
        name: "Mutation",
        description: """
        Root mutation type
        """,
        fields: [
            "upsertUser": GraphQLField(
                type: userType,
                args: [
                    "userInfo": GraphQLArgument(
                        type: GraphQLNonNull(userInfoInput)
                    ),
                ],
                resolve: { source, args, context, info in
                    let userInfoInput = try MapDecoder().decode(UserInfoInput.self, from: args["userInfo"])
                    let context = try resolvers.cast(context, to: T.TypeMap.Context.self)
                    return try await resolvers.upsertUser(userInfo: userInfoInput, context: context, info: info)
                }
            ),
        ]
    )
    return try GraphQLSchema(
        query: queryType,
        mutation: mutationType,
        types: [
            roleType,
            hasEmailInterface,
            userType,
            contactType,
            postType,
            userOrPostUnion,
        ]
    )
}
